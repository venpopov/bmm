<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="bmm">
<title>The Interference Measurement Model (IMM) • bmm</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="The Interference Measurement Model (IMM)">
<meta property="og:description" content="bmm">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">bmm</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.5.3.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://venpopov.github.io/bmm/dev/dev-notes/index.html">Develop</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/venpopov/bmm/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>The Interference Measurement Model (IMM)</h1>
                        <h4 data-toc-skip class="author">Gidon Frischkorn</h4>
                        <h4 data-toc-skip class="author">Ven Popov</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/venpopov/bmm/blob/HEAD/vignettes/bmm_imm.Rmd" class="external-link"><code>vignettes/bmm_imm.Rmd</code></a></small>
      <div class="d-none name"><code>bmm_imm.Rmd</code></div>
    </div>

    
    
<style type="text/css">
div.main-container {
max-width: 800px !important;
}

p {
margin-top: 1.5em ;
margin-bottom: 1.5em ;
}
.author{
    display: none;
}
</style>
<div class="section level2" number="1">
<h2 id="introduction-to-the-model">
<span class="header-section-number">1</span> Introduction to the model<a class="anchor" aria-label="anchor" href="#introduction-to-the-model"></a>
</h2>
<p>The Interference Measurement Model (IMM) is a measurement model for continous reproduction tasks in the domain of visual working memory. The model was introduced by <span class="citation">Oberauer et al. (2017)</span> . The aim of the IMM is to capture the response behavior in continuous reproduction tasks including the occurrence of swap errors to other items encoded in visual working memory.</p>
<p>The IMM assumes that during retrieval, to-be-remembered items or features (e.g., colors, orientations, or shapes) are associated with the context they appeared in (e.g. the spatial location). These associations can be continuous in their strength and represent bindings between the contents and context of to-be-remembered information (see Figure <a href="#fig:imm-illustration">1.1</a>). At retrieval there are different sources of activation that contribute to the activation of the to-be-retrieved contents. Background noise (b) uniformly activates all possible responses, for example all 360 colors that participants can chose from in a color wheel experiment. Cue-independent activation (a) equally activates all features that were encoded into visual working memory during retrieval. And cue-dependent activation (c) activates the features that are associated with the current retrieval cue (e.g., the spatial location cued to be retrieved). Additionally, the IMM assumes that cue-dependent activation follows a generalization gradient (s) that activates similar contexts.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:imm-illustration"></span>
<img src="Fig1_Oberauer2017.png" alt="Illustration of the IMM from Oberauer et al. (2017)" width="450"><p class="caption">
Figure 1.1: Illustration of the IMM from Oberauer et al. (2017)
</p>
</div>
<p>The activation for each potential feature <span class="math inline">\(x\)</span> that could be retrieved is the sum of the weighted activation from all three activation sources, given a retrieval cue <span class="math inline">\(L\)</span> at the location <span class="math inline">\(\theta\)</span>:</p>
<p><span class="math display">\[
A(x|L_\theta) = b \times A_b(x) + a \times A_a(x) + c \times A_c(c|L_\theta)
\]</span></p>
<p>The background activation (<span class="math inline">\(A_b\)</span>) is independent from all encoded features and thus modeled as a uniform distribution around the circular feature space. This is implemented as a von-Mises (vM) distribution centered on 0 with a precision <span class="math inline">\(\kappa = 0\)</span>:</p>
<p><span class="math display">\[
A_b(x) = vM(x,0,0)
\]</span></p>
<p>The cue-independent activation (<span class="math inline">\(A_a\)</span>) is modeled as the sum of von Mises distributions centered on the feature values <span class="math inline">\(x_i\)</span> of all <span class="math inline">\(n\)</span> encoded items <span class="math inline">\(i\)</span> with the precision of memory :</p>
<p><span class="math display">\[
A_a(x) = \sum^n_{i = 1} vM(x,x_i,\kappa)
\]</span></p>
<p>The cue-dependent activation (<span class="math inline">\(A_c\)</span>) is again modeled as the sum of von Mises distributions centered on the feature values <span class="math inline">\(x_i\)</span> of all <span class="math inline">\(n\)</span> encoded items <span class="math inline">\(i\)</span> with the precision of memory . These distributions are weighted by the spatial distance <span class="math inline">\(D\)</span> between the context <span class="math inline">\(L\)</span> a feature was associated with to the cue context <span class="math inline">\(L_\theta\)</span>. This distance is weighted by the generalization gradient <span class="math inline">\(s\)</span> that captures the specificity of bindings to the cue dimension:</p>
<p><span class="math display">\[
A_c(x|L_\theta) = \sum^n_{i = 1} e^{-s*D(L,L\theta)} \times vM(x,x_i,\kappa)
\]</span></p>
<p>The probability for choosing each response <span class="math inline">\(\hat{x}\)</span> then results from normalizing the activation for all possible responses <span class="math inline">\(N\)</span>. In the original publication of the IMM this was done using Luce’s choice rule:</p>
<p><span class="math display">\[
P(\hat{x}|L_\theta) = \frac{A(\hat{x}|L_\theta)}{\sum^N_{j=1}A(j|L_\theta)}
\]</span></p>
<p>The <code>bmm</code> package uses the same parameterization, except that it uses a <code>log</code> Link function for all activation parameters to ensure that these parameters are positive.</p>
<p>In sum, the IMM assumes that responses in continuous reproduction tasks are the results of cue-based retrieval and cue-independent activation of all features corrupted by background noise.</p>
</div>
<div class="section level2" number="2">
<h2 id="parametrization-in-the-bmm-package">
<span class="header-section-number">2</span> Parametrization in the <code>bmm</code> package<a class="anchor" aria-label="anchor" href="#parametrization-in-the-bmm-package"></a>
</h2>
<p>For identification, one of the weighting parameters has to be fixed. In the original publication the strength of cue-dependent activation <span class="math inline">\(c\)</span> was fixed to one. The default setup of <code>brms</code> however currently only allows to fix the strength of the background noise <span class="math inline">\(b\)</span> to one Therefore, in all implementations of the IMM in the <code>bmm</code> package, the strength of cue-dependent and cue-independent activation, <span class="math inline">\(c\)</span> and <span class="math inline">\(a\)</span>, can be estimated and predicted by independent variables.</p>
<p>Apart from that, both the precision of memory representations <span class="math inline">\(\kappa\)</span> and the generalization gradient <span class="math inline">\(s\)</span> are parameterized the same way as in the original publication. Please also note, that the scaling of the generalization gradient <code>s</code> is dependent on the scaling of the distance <code>D</code> between the target location and the locations of the non-targets. In previous studies estimating the IMM <span class="citation">(Oberauer et al. 2017)</span> these distances were scaled in radians, as all items were placed on a imaginary circle around the center of the screen. However, other studies might position the color patches randomly inside a frame of a certain width and height and thus might use euclidean distances. Also changing the radius of the imaginary circles that color patches are placed on, will change the absolute distance between items. This will affect the absolute size of the generalization gradient <code>s</code>. Thus, differences in the generalization gradient <code>s</code> between different studies should not be interpreted strongly, especially if the studies used different distance measures or different experimental settings with respect to the placement of the items. For now, we recommend that only differences in the generalization gradient <code>s</code> between conditions of a single experiment should be taken as robust results.</p>
</div>
<div class="section level2" number="3">
<h2 id="fitting-the-model-with-bmm">
<span class="header-section-number">3</span> Fitting the model with <code>bmm</code><a class="anchor" aria-label="anchor" href="#fitting-the-model-with-bmm"></a>
</h2>
<p>You should start by loading the <code>bmm</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/venpopov/bmm" class="external-link">bmm</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3" number="3.1">
<h3 id="generating-simulated-data">
<span class="header-section-number">3.1</span> Generating simulated data<a class="anchor" aria-label="anchor" href="#generating-simulated-data"></a>
</h3>
<p>Should you already have a data set you want to fit, you can skip this section. Alternatively, you can use data provided with the package (see <code>data(package='bmm')</code>) or generate data using the random generation function provided in the <code>bmm</code> package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set seed for reproducibility</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># specfiy generating parameters</span></span>
<span><span class="va">Cs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">4</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">As</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>,<span class="fl">1</span>,<span class="fl">0.5</span>,<span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="va">Ss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">10</span>,<span class="fl">5</span>,<span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">kappas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">10</span>,<span class="fl">15</span>,<span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">nTrials</span> <span class="op">=</span> <span class="fl">2000</span></span>
<span><span class="va">set_size</span> <span class="op">=</span> <span class="fl">5</span></span>
<span></span>
<span><span class="va">simData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Cs</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># generate different non-target locations for each condition</span></span>
<span>  <span class="va">item_location</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">set_size</span> <span class="op">-</span> <span class="fl">1</span>, <span class="op">-</span><span class="va">pi</span>,<span class="va">pi</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># generate different distances for each condition</span></span>
<span>  <span class="va">item_distance</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">set_size</span> <span class="op">-</span> <span class="fl">1</span>, min <span class="op">=</span> <span class="fl">0.1</span>, max <span class="op">=</span> <span class="va">pi</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># simulate data for each condition</span></span>
<span>  <span class="va">genData</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/IMMdist.html">rimm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">nTrials</span>,</span>
<span>                  mu <span class="op">=</span> <span class="va">item_location</span>,</span>
<span>                  dist <span class="op">=</span> <span class="va">item_distance</span>,</span>
<span>                  c <span class="op">=</span> <span class="va">Cs</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, a <span class="op">=</span> <span class="va">As</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>                  b <span class="op">=</span> <span class="fl">1</span>, s <span class="op">=</span> <span class="va">Ss</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, kappa <span class="op">=</span> <span class="va">kappas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">condData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    resp_error <span class="op">=</span> <span class="va">genData</span>,</span>
<span>    trialID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">nTrials</span>,</span>
<span>    cond <span class="op">=</span> <span class="va">i</span>,</span>
<span>    color_item1 <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    dist_item1 <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">init_colnames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">condData</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">set_size</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">condData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">condData</span>,<span class="va">item_location</span><span class="op">[</span><span class="va">j</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="va">condData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">condData</span>,<span class="va">item_distance</span><span class="op">[</span><span class="va">j</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">condData</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">init_colnames</span>,</span>
<span>                          <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"color_item"</span>,<span class="st">"dist_item"</span><span class="op">)</span>,times <span class="op">=</span> <span class="va">set_size</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span>, </span>
<span>                                 <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="op">(</span><span class="va">set_size</span><span class="op">)</span>,each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">simData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">simData</span>,<span class="va">condData</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># convert condition variable to a factor</span></span>
<span></span>
<span><span class="va">simData</span><span class="op">$</span><span class="va">cond</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">simData</span><span class="op">$</span><span class="va">cond</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3" number="3.2">
<h3 id="estimating-the-model-with-bmm">
<span class="header-section-number">3.2</span> Estimating the model with <code>bmm</code><a class="anchor" aria-label="anchor" href="#estimating-the-model-with-bmm"></a>
</h3>
<p>To estimate the <code>IMM</code> we first need to specify a formula. We specify the formula using the <code>bmmformula</code> function (or <code>bmf</code>). In this formula, we directly estimate all parameters for each of the four conditions. Unlike for <code>brmsformula</code> we do not provide the dependent variable in this formula.:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_formula</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bmmformula.html">bmf</a></span><span class="op">(</span></span>
<span>  <span class="va">c</span> <span class="op">~</span> <span class="fl">0</span> <span class="op">+</span> <span class="va">cond</span>,</span>
<span>  <span class="va">a</span> <span class="op">~</span> <span class="fl">0</span> <span class="op">+</span> <span class="va">cond</span>,</span>
<span>  <span class="va">s</span> <span class="op">~</span> <span class="fl">0</span> <span class="op">+</span> <span class="va">cond</span>,</span>
<span>  <span class="va">kappa</span> <span class="op">~</span> <span class="fl">0</span> <span class="op">+</span> <span class="va">cond</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Then, we can specify the model that we want to estimate. This includes specifying the name of the variable containing the dependent variable <code>resp_error</code> in our simulated data set. Additionally, we also need to provide the information of the <code>non_target</code> locations, the name of the variable coding the spatial distances of the nt_features to the target <code>spaDist</code>, and the <code>set_size</code> used in our data. The <code>set_size</code> can either be a fixed integer, if there is only one set_size in your data, or the name of the variable coding the <code>set_size</code> in your data:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/imm.html">imm</a></span><span class="op">(</span>resp_error <span class="op">=</span> <span class="st">"resp_error"</span>,</span>
<span>             nt_features <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"color_item"</span>,<span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>,</span>
<span>             set_size <span class="op">=</span> <span class="va">set_size</span>,</span>
<span>             nt_distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"dist_item"</span>,<span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>,</span>
<span>             version <span class="op">=</span> <span class="st">"full"</span><span class="op">)</span></span></code></pre></div>
<p>In the above example we specified all column names for the non_targets explicitly via <code>paste0('color_item',2:5)</code>. Alternatively, you can use a regular expression to match the non-target feature columns in the dataset. For example, you can specify the model a few different ways via regular expressions:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/imm.html">imm</a></span><span class="op">(</span>resp_error <span class="op">=</span> <span class="st">"resp_error"</span>,</span>
<span>             nt_features <span class="op">=</span> <span class="st">"color_item[2-5]"</span>,</span>
<span>             set_size <span class="op">=</span> <span class="va">set_size</span>,</span>
<span>             nt_distances <span class="op">=</span> <span class="st">"dist_item[2-5]"</span>,</span>
<span>             regex <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>By default the imm() function implements the full imm model. You can specify a reduced model by setting the version argument to “abc” or “bsc” (see <code><a href="../reference/imm.html">?imm</a></code>).</p>
<p>Finally, we can fit the model by passing all the relevant arguments to the <code><a href="../reference/bmm.html">bmm()</a></code> function:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bmm.html">bmm</a></span><span class="op">(</span></span>
<span>  formula <span class="op">=</span> <span class="va">model_formula</span>,</span>
<span>  data <span class="op">=</span> <span class="va">simData</span>,</span>
<span>  model <span class="op">=</span> <span class="va">model</span>,</span>
<span>  cores <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  backend <span class="op">=</span> <span class="st">"cmdstanr"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Running this model takes about 2 to 5 minutes (depending on the speed of your computer). Here we load an already saved fit object, but on your machine you will have to wait until the model finishes sampling. Both <code>brms</code> and <code>cmdstanr</code> typically print out some information on the sampling progress.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">bmm</span><span class="fu">:::</span><span class="va">bmmfit_imm_vignette</span></span></code></pre></div>
<p>Using this <code>fit</code> object we can have a quick look at the summary of the fitted model:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<pre class="fansi fansi-output"><code><span style="color: #AF5FFF;">  Model: </span><span style="color: #FF875F;">non_targets</span>(resp_err = "resp_err",
                     nt_features = c("color_item2", "color_item3", "color_item4", "color_item5"),
                     nt_distances = c("dist_item2", "dist_item3", "dist_item4", "dist_item5"),
                     setsize = 5) 
<span style="color: #AF5FFF;">  Links: </span>mu1 = tan_half; kappa = log; a = identity; c = identity; s = log 
<span style="color: #AF5FFF;">Formula: </span>mu1 = 0
         kappa ~ 0 + cond
         a ~ 0 + cond
         c ~ 0 + cond
         s ~ 0 + cond 
<span style="color: #AF5FFF;">   Data:</span> simData (Number of observations: 4000)
<span style="color: #AF5FFF;">  Draws: </span>4 chains, each with iter = 2000; warmup = 1000; thin = 1;
         total post-warmup draws = 4000

<span style="color: #00BB00;">Regression Coefficients:
</span>            Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
kappa_cond1     2.63      0.05     2.54     2.73 1.00     6083     2959
kappa_cond2     2.32      0.05     2.23     2.42 1.00     7319     2917
kappa_cond3     2.69      0.06     2.57     2.80 1.00     5563     2675
kappa_cond4     2.37      0.06     2.26     2.49 1.00     5249     3407
a_cond1         1.56      0.58     0.53     2.76 1.00     5249     3194
a_cond2         0.78      0.67    -0.44     2.18 1.00     4622     2935
a_cond3         0.86      0.39     0.17     1.65 1.00     5170     2595
a_cond4         0.74      0.36     0.11     1.48 1.00     4076     2881
c_cond1         3.67      0.16     3.39     4.02 1.00     3570     1866
c_cond2         4.40      0.26     3.97     5.02 1.00     3055     2170
c_cond3         1.91      0.08     1.77     2.07 1.00     5476     2970
c_cond4         2.05      0.11     1.86     2.28 1.00     3991     2363
s_cond1         0.94      0.61    -0.06     2.32 1.00     2337     1944
s_cond2         1.78      0.47     1.02     2.82 1.00     2803     2751
s_cond3         1.79      0.45     1.13     2.88 1.00     3945     2300
s_cond4         1.20      0.54     0.36     2.44 1.00     3145     2427

<span style="color: #00BB00;">Constant Parameters:
</span>                  Value
mu1_Intercept      0.00

Draws were sampled using sampling(NUTS). For each parameter, Bulk_ESS
and Tail_ESS are effective sample size measures, and Rhat is the potential
scale reduction factor on split chains (at convergence, Rhat = 1).
</code></pre>
<p>The first thing you might notice is that below the parts of the formula that was passed to the <code><a href="../reference/bmm.html">bmm()</a></code> function, <code>bmm</code> has added a lot of additional specifications to implement the IMM. This is nothing that you have to check. But if you are interested in customizing and exploring different assumptions imposed by the IMM, you could start by taking this formula and adapting it accordingly.</p>
<p>Next, we can have a look at the estimated parameters. The first thing we should check is if the sampling converged, this is indicated by all <code>Rhat</code> values being close to one. If you want to do more inspection of the sampling, you can check out the functionality implemented in <code>brms</code>to do this.</p>
<p>The parameter estimates for <code>c</code> and <code>a</code> are already on their native scale, but both <code>s</code> and <code>kappa</code> are estimated using a <code>log</code> link function, so we have to transform these back to the native scale.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fixedFX</span> <span class="op">&lt;-</span> <span class="fu">brms</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/nlme/man/fixed.effects.html" class="external-link">fixef</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print posterior means for the s parameter</span></span>
<span><span class="va">fixedFX</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/startsWith.html" class="external-link">startsWith</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">fixedFX</span><span class="op">)</span>,<span class="st">"c_"</span><span class="op">)</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;         Estimate  Est.Error     Q2.5    Q97.5</span></span>
<span><span class="co">#&gt; c_cond1 3.670572 0.16084115 3.394321 4.020778</span></span>
<span><span class="co">#&gt; c_cond2 4.401691 0.26487921 3.969000 5.023963</span></span>
<span><span class="co">#&gt; c_cond3 1.913522 0.07632643 1.768573 2.065081</span></span>
<span><span class="co">#&gt; c_cond4 2.050996 0.10616580 1.856427 2.276359</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># print posterior means for the s parameter</span></span>
<span><span class="va">fixedFX</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/startsWith.html" class="external-link">startsWith</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">fixedFX</span><span class="op">)</span>,<span class="st">"a_"</span><span class="op">)</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;          Estimate Est.Error       Q2.5    Q97.5</span></span>
<span><span class="co">#&gt; a_cond1 1.5602995 0.5754700  0.5318122 2.755671</span></span>
<span><span class="co">#&gt; a_cond2 0.7796907 0.6711383 -0.4447393 2.181122</span></span>
<span><span class="co">#&gt; a_cond3 0.8583318 0.3851788  0.1650280 1.650582</span></span>
<span><span class="co">#&gt; a_cond4 0.7404941 0.3554419  0.1097129 1.484371</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># print posterior means for the s parameter</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">fixedFX</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"s_"</span>,<span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">fixedFX</span><span class="op">)</span><span class="op">)</span>,<span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;         Estimate Est.Error      Q2.5    Q97.5</span></span>
<span><span class="co">#&gt; s_cond1 2.563880  1.834421 0.9425244 10.20855</span></span>
<span><span class="co">#&gt; s_cond2 5.932295  1.603699 2.7644132 16.79831</span></span>
<span><span class="co">#&gt; s_cond3 5.987427  1.567627 3.0849707 17.89819</span></span>
<span><span class="co">#&gt; s_cond4 3.317288  1.721499 1.4403183 11.47896</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># print posterior means for the s parameter</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">fixedFX</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"kappa_"</span>,<span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">fixedFX</span><span class="op">)</span><span class="op">)</span>,<span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;             Estimate Est.Error      Q2.5    Q97.5</span></span>
<span><span class="co">#&gt; kappa_cond1 13.94268  1.051448 12.670659 15.32498</span></span>
<span><span class="co">#&gt; kappa_cond2 10.21227  1.049288  9.281720 11.21525</span></span>
<span><span class="co">#&gt; kappa_cond3 14.68647  1.058859 13.110356 16.39623</span></span>
<span><span class="co">#&gt; kappa_cond4 10.74340  1.061760  9.548517 12.07860</span></span></code></pre></div>
<p>These results indicate that all parameters, except for <code>s</code> were well recovered. As already noted by <span class="citation">Oberauer et al. (2017)</span>, a good recovery of the generalization gradient <code>s</code> requires a lot of data. Thus you might consider opting for the simplified version of the IMM without the <code>s</code> parameter, the <code>imm_abc</code>.</p>
<p>We can illustrate the recovery of the data generating parameters by plotting the full posterior distributions alongside the data generating parameters. For this we need to extract the posterior draws using the <code>tidybayes</code> package and include the data generating parameters into the plots of the posteriors.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mjskay.github.io/tidybayes/" class="external-link">tidybayes</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract the posterior draws</span></span>
<span><span class="va">draws</span> <span class="op">&lt;-</span> <span class="fu">tidybayes</span><span class="fu">::</span><span class="fu"><a href="http://mjskay.github.io/tidybayes/reference/tidy_draws.html" class="external-link">tidy_draws</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="va">draws</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">draws</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"b_"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html" class="external-link">mutate_at</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"b_s"</span><span class="op">)</span><span class="op">)</span>,<span class="va">exp</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html" class="external-link">mutate_at</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"b_kappa"</span><span class="op">)</span><span class="op">)</span>,<span class="va">exp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot posterior with original parameters overlayed as diamonds</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">draws</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html" class="external-link">gather</a></span><span class="op">(</span><span class="va">par</span>, <span class="va">value</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">value</span>, <span class="va">par</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">tidybayes</span><span class="fu">::</span><span class="fu"><a href="http://mjskay.github.io/tidybayes/reference/tidybayes-deprecated.html" class="external-link">stat_halfeyeh</a></span><span class="op">(</span>normalize <span class="op">=</span> <span class="st">"groups"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>par <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">draws</span><span class="op">)</span>,</span>
<span>                               value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">kappas</span>, <span class="va">As</span>, <span class="va">Cs</span>, <span class="va">Ss</span><span class="op">)</span><span class="op">)</span>,</span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">value</span>,<span class="va">par</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>             shape <span class="op">=</span> <span class="st">"diamond"</span>, size <span class="op">=</span> <span class="fl">2.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>lim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1.5</span>,<span class="fl">20</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="bmm_imm_files/figure-html/unnamed-chunk-9-1.jpeg" width="80%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">draws</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "b_kappa_cond1" "b_kappa_cond2" "b_kappa_cond3" "b_kappa_cond4"</span></span>
<span><span class="co">#&gt;  [5] "b_a_cond1"     "b_a_cond2"     "b_a_cond3"     "b_a_cond4"    </span></span>
<span><span class="co">#&gt;  [9] "b_c_cond1"     "b_c_cond2"     "b_c_cond3"     "b_c_cond4"    </span></span>
<span><span class="co">#&gt; [13] "b_s_cond1"     "b_s_cond2"     "b_s_cond3"     "b_s_cond4"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-oberauerHierarchicalBayesianMeasurement2017" class="csl-entry">
Oberauer, Klaus, Colin Stoneking, Dominik Wabersich, and Hsuan-Yu Lin. 2017. <span>“Hierarchical <span>Bayesian</span> Measurement Models for Continuous Reproduction of Visual Features from Working Memory.”</span> <em>Journal of Vision</em> 17 (5): 11. <a href="https://doi.org/10.1167/17.5.11" class="external-link">https://doi.org/10.1167/17.5.11</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Vencislav Popov, Gidon Frischkorn.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
